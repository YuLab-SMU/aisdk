% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/flow_stack.R
\name{FlowStack}
\alias{FlowStack}
\title{FlowStack Class}
\description{
R6 class representing an enhanced orchestration layer for multi-agent systems.
Extends Flow with:
\itemize{
\item Comprehensive delegation tracing
\item Automatic delegate_task tool generation
\item Depth and context limits with guardrails
\item Result aggregation and summarization
}
}
\section{Super class}{
\code{\link[aisdk:Flow]{aisdk::Flow}} -> \code{FlowStack}
}
\section{Methods}{
\subsection{Public methods}{
\itemize{
\item \href{#method-FlowStack-new}{\code{FlowStack$new()}}
\item \href{#method-FlowStack-delegate}{\code{FlowStack$delegate()}}
\item \href{#method-FlowStack-generate_delegate_tool}{\code{FlowStack$generate_delegate_tool()}}
\item \href{#method-FlowStack-run}{\code{FlowStack$run()}}
\item \href{#method-FlowStack-get_delegation_history}{\code{FlowStack$get_delegation_history()}}
\item \href{#method-FlowStack-delegation_stats}{\code{FlowStack$delegation_stats()}}
\item \href{#method-FlowStack-clear_history}{\code{FlowStack$clear_history()}}
\item \href{#method-FlowStack-print}{\code{FlowStack$print()}}
\item \href{#method-FlowStack-clone}{\code{FlowStack$clone()}}
}
}
\if{html}{\out{
<details open><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="aisdk" data-topic="Flow" data-id="current"><a href='../../aisdk/html/Flow.html#method-Flow-current'><code>aisdk::Flow$current()</code></a></span></li>
<li><span class="pkg-link" data-pkg="aisdk" data-topic="Flow" data-id="depth"><a href='../../aisdk/html/Flow.html#method-Flow-depth'><code>aisdk::Flow$depth()</code></a></span></li>
<li><span class="pkg-link" data-pkg="aisdk" data-topic="Flow" data-id="global_context"><a href='../../aisdk/html/Flow.html#method-Flow-global_context'><code>aisdk::Flow$global_context()</code></a></span></li>
<li><span class="pkg-link" data-pkg="aisdk" data-topic="Flow" data-id="session"><a href='../../aisdk/html/Flow.html#method-Flow-session'><code>aisdk::Flow$session()</code></a></span></li>
<li><span class="pkg-link" data-pkg="aisdk" data-topic="Flow" data-id="set_global_context"><a href='../../aisdk/html/Flow.html#method-Flow-set_global_context'><code>aisdk::Flow$set_global_context()</code></a></span></li>
</ul>
</details>
}}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-FlowStack-new"></a>}}
\if{latex}{\out{\hypertarget{method-FlowStack-new}{}}}
\subsection{Method \code{new()}}{
Initialize a new FlowStack.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{FlowStack$new(
  session,
  model,
  registry = NULL,
  max_depth = 5,
  max_steps_per_agent = 10,
  max_context_tokens = 4000,
  enable_guardrails = TRUE
)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{session}}{A SharedSession or ChatSession object.}

\item{\code{model}}{The default model ID to use.}

\item{\code{registry}}{Optional AgentRegistry for agent lookup.}

\item{\code{max_depth}}{Maximum delegation depth. Default 5.}

\item{\code{max_steps_per_agent}}{Maximum ReAct steps per agent. Default 10.}

\item{\code{max_context_tokens}}{Maximum context tokens per delegation. Default 4000.}

\item{\code{enable_guardrails}}{Enable safety guardrails. Default TRUE.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-FlowStack-delegate"></a>}}
\if{latex}{\out{\hypertarget{method-FlowStack-delegate}{}}}
\subsection{Method \code{delegate()}}{
Delegate a task to another agent with enhanced tracking.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{FlowStack$delegate(agent, task, context = NULL, priority = "normal")}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{agent}}{The Agent to delegate to.}

\item{\code{task}}{The task instruction.}

\item{\code{context}}{Optional additional context.}

\item{\code{priority}}{Task priority: "high", "normal", "low". Default "normal".}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
The text result from the delegate agent.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-FlowStack-generate_delegate_tool"></a>}}
\if{latex}{\out{\hypertarget{method-FlowStack-generate_delegate_tool}{}}}
\subsection{Method \code{generate_delegate_tool()}}{
Generate the delegate_task tool for manager agents.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{FlowStack$generate_delegate_tool()}\if{html}{\out{</div>}}
}

\subsection{Details}{
Creates a single unified tool that can delegate to any registered agent.
This is more efficient than generating separate tools per agent.
}

\subsection{Returns}{
A Tool object for delegation.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-FlowStack-run"></a>}}
\if{latex}{\out{\hypertarget{method-FlowStack-run}{}}}
\subsection{Method \code{run()}}{
Run a primary agent with enhanced orchestration.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{FlowStack$run(agent, task, use_unified_delegate = TRUE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{agent}}{The primary/manager Agent to run.}

\item{\code{task}}{The user's task/input.}

\item{\code{use_unified_delegate}}{Use single delegate_task tool. Default TRUE.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
The final result from the primary agent.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-FlowStack-get_delegation_history"></a>}}
\if{latex}{\out{\hypertarget{method-FlowStack-get_delegation_history}{}}}
\subsection{Method \code{get_delegation_history()}}{
Get delegation history.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{FlowStack$get_delegation_history(agent_name = NULL, limit = NULL)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{agent_name}}{Optional filter by agent name.}

\item{\code{limit}}{Maximum number of records to return.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
A list of delegation records.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-FlowStack-delegation_stats"></a>}}
\if{latex}{\out{\hypertarget{method-FlowStack-delegation_stats}{}}}
\subsection{Method \code{delegation_stats()}}{
Get delegation statistics.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{FlowStack$delegation_stats()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
A list with counts, timing, and success rates.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-FlowStack-clear_history"></a>}}
\if{latex}{\out{\hypertarget{method-FlowStack-clear_history}{}}}
\subsection{Method \code{clear_history()}}{
Clear delegation history.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{FlowStack$clear_history()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
Invisible self for chaining.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-FlowStack-print"></a>}}
\if{latex}{\out{\hypertarget{method-FlowStack-print}{}}}
\subsection{Method \code{print()}}{
Print method for FlowStack.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{FlowStack$print()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-FlowStack-clone"></a>}}
\if{latex}{\out{\hypertarget{method-FlowStack-clone}{}}}
\subsection{Method \code{clone()}}{
The objects of this class are cloneable with this method.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{FlowStack$clone(deep = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{deep}}{Whether to make a deep clone.}
}
\if{html}{\out{</div>}}
}
}
}
